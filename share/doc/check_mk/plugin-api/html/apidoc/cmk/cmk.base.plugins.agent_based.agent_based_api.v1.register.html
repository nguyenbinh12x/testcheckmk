

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>agent_based_api.v1.register &mdash; Checkmk&#39;s Plugin API  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="agent_based_api.v1.render" href="cmk.base.plugins.agent_based.agent_based_api.v1.render.html" />
    <link rel="prev" title="agent_based_api.v1.clusterize" href="cmk.base.plugins.agent_based.agent_based_api.v1.clusterize.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Checkmk's Plugin API
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Base</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="cmk.base.plugins.agent_based.agent_based_api.html">Agent based API (“Check API”)</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="cmk.base.plugins.agent_based.agent_based_api.html#version-1">Version 1</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="cmk.base.plugins.agent_based.agent_based_api.v1.html">agent_based_api.v1</a></li>
<li class="toctree-l3"><a class="reference internal" href="cmk.base.plugins.agent_based.agent_based_api.v1.clusterize.html">agent_based_api.v1.clusterize</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">agent_based_api.v1.register</a></li>
<li class="toctree-l3"><a class="reference internal" href="cmk.base.plugins.agent_based.agent_based_api.v1.render.html">agent_based_api.v1.render</a></li>
<li class="toctree-l3"><a class="reference internal" href="cmk.base.plugins.agent_based.agent_based_api.v1.type_defs.html">agent_based_api.v1.type_defs</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Checkmk's Plugin API</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="cmk.base.plugins.agent_based.agent_based_api.html">Agent based API (“Check API”)</a> &raquo;</li>
        
      <li>agent_based_api.v1.register</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <span class="target" id="module-cmk.base.plugins.agent_based.agent_based_api.v1.register"></span><div class="section" id="agent-based-api-v1-register">
<h1>agent_based_api.v1.register<a class="headerlink" href="#agent-based-api-v1-register" title="Permalink to this headline">¶</a></h1>
<p>The “register” namespace contains functions to inform Checkmk about plugins.</p>
<dl class="py class">
<dt id="cmk.base.plugins.agent_based.agent_based_api.v1.register.RuleSetType">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">RuleSetType</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cmk.base.plugins.agent_based.agent_based_api.v1.register.RuleSetType" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">enum.Enum</span></code></p>
<p>Indicate the type of the rule set</p>
<p>Discovery and host label functions may either use all rules of a rule set matching
the current host, or the merged rules.</p>
</dd></dl>

<dl class="py function">
<dt id="cmk.base.plugins.agent_based.agent_based_api.v1.register.agent_section">
<code class="sig-name descname"><span class="pre">agent_section</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">*</span></em>, <em class="sig-param"><span class="pre">name</span></em>, <em class="sig-param"><span class="pre">parse_function=None</span></em>, <em class="sig-param"><span class="pre">parsed_section_name=None</span></em>, <em class="sig-param"><span class="pre">host_label_function=None</span></em>, <em class="sig-param"><span class="pre">host_label_default_parameters=None</span></em>, <em class="sig-param"><span class="pre">host_label_ruleset_name=None</span></em>, <em class="sig-param"><span class="pre">host_label_ruleset_type=&lt;RuleSetType.MERGED:</span> <span class="pre">1&gt;</span></em>, <em class="sig-param"><span class="pre">supersedes=None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cmk.base.plugins.agent_based.agent_based_api.v1.register.agent_section" title="Permalink to this definition">¶</a></dt>
<dd><p>Register an agent section to checkmk</p>
<p>The section marked by ‘&lt;&lt;&lt;name&gt;&gt;&gt;’ in the raw agent output will be processed
according to the functions and options given to this function:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The unique name of the section to be registered.
It must match the section header of the agent output (‘&lt;&lt;&lt;name&gt;&gt;&gt;’).</p></li>
<li><p><strong>parse_function</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]], <code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>]]) – The function responsible for parsing the raw agent data.
It must accept exactly one argument by the name ‘string_table’.
It may return an arbitrary object. Note that if the return value is
<cite>None</cite>, no forther processing will take place (just as if the agent had
not sent any data).
This function may raise arbitrary exceptions, which will be dealt with
by the checking engine. You should expect well formatted data.</p></li>
<li><p><strong>parsed_section_name</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – The name under which the parsed section will be available to the plugins.
Defaults to the original name.</p></li>
<li><p><strong>host_label_function</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[…, <code class="xref py py-class docutils literal notranslate"><span class="pre">Generator</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">HostLabel</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]]]) – The function responsible for extracting host labels from the parsed data.
It must accept exactly one argument by the name ‘section’.
When the function is called, it will be passed the parsed data as
returned by the parse function.
It is expected to yield objects of type <code class="xref py py-class docutils literal notranslate"><span class="pre">HostLabel</span></code>.</p></li>
<li><p><strong>host_label_default_parameters</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>]]) – Default parameters for the host label function. Must match
the ValueSpec of the corresponding WATO ruleset, if it exists.</p></li>
<li><p><strong>host_label_ruleset_name</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – The name of the host label ruleset.</p></li>
<li><p><strong>host_label_ruleset_type</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">RuleSetType</span></code>) – The ruleset type is either <code class="xref py py-class docutils literal notranslate"><span class="pre">RuleSetType.ALL</span></code> or
<code class="xref py py-class docutils literal notranslate"><span class="pre">RuleSetType.MERGED</span></code>.
It describes whether this plugins needs the merged result of the
effective rules, or every individual rule matching for the current host.</p></li>
<li><p><strong>supersedes</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – A list of section names which are superseded by this sections. If this
section will be parsed to something that is not <cite>None</cite> (see above) all
superseded section will not be considered at all.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cmk.base.plugins.agent_based.agent_based_api.v1.register.check_plugin">
<code class="sig-name descname"><span class="pre">check_plugin</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">*</span></em>, <em class="sig-param"><span class="pre">name</span></em>, <em class="sig-param"><span class="pre">sections=None</span></em>, <em class="sig-param"><span class="pre">service_name</span></em>, <em class="sig-param"><span class="pre">discovery_function</span></em>, <em class="sig-param"><span class="pre">discovery_default_parameters=None</span></em>, <em class="sig-param"><span class="pre">discovery_ruleset_name=None</span></em>, <em class="sig-param"><span class="pre">discovery_ruleset_type=&lt;RuleSetType.MERGED:</span> <span class="pre">1&gt;</span></em>, <em class="sig-param"><span class="pre">check_function</span></em>, <em class="sig-param"><span class="pre">check_default_parameters=None</span></em>, <em class="sig-param"><span class="pre">check_ruleset_name=None</span></em>, <em class="sig-param"><span class="pre">cluster_check_function=None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cmk.base.plugins.agent_based.agent_based_api.v1.register.check_plugin" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a check plugin to checkmk.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The unique name of the check plugin. It must only contain the
characters ‘A-Z’, ‘a-z’, ‘0-9’ and the underscore.</p></li>
<li><p><strong>sections</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – An optional list of section names that this plugin subscribes to.
They correspond to the ‘parsed_section_name’ specified in
<a class="reference internal" href="#cmk.base.plugins.agent_based.agent_based_api.v1.register.agent_section" title="cmk.base.plugins.agent_based.agent_based_api.v1.register.agent_section"><code class="xref py py-meth docutils literal notranslate"><span class="pre">agent_section()</span></code></a> and <a class="reference internal" href="#cmk.base.plugins.agent_based.agent_based_api.v1.register.snmp_section" title="cmk.base.plugins.agent_based.agent_based_api.v1.register.snmp_section"><code class="xref py py-meth docutils literal notranslate"><span class="pre">snmp_section()</span></code></a>.
The corresponding sections are passed to the discovery and check
function. The functions arguments must be called ‘section_&lt;name1&gt;,
section_&lt;name2&gt;’ ect. Defaults to a list containing as only element
a name equal to the name of the check plugin.</p></li>
<li><p><strong>service_name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The template for the service name. The check function must accept
‘item’ as first argument if and only if “%s” is present in the value
of “service_name”.</p></li>
<li><p><strong>discovery_function</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[…, <code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Service</span></code>]]) – The discovery_function. Arguments must be ‘params’ (if discovery
parameters are defined) and ‘section’ (if the plugin subscribes
to a single section), or ‘section_&lt;name1&gt;, section_&lt;name2&gt;’ ect.
corresponding to the <cite>sections</cite>.
It is expected to be a generator of <code class="xref py py-class docutils literal notranslate"><span class="pre">Service</span></code> instances.</p></li>
<li><p><strong>discovery_default_parameters</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>]]) – Default parameters for the discovery function. Must match the
ValueSpec of the corresponding WATO ruleset, if it exists.</p></li>
<li><p><strong>discovery_ruleset_name</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – The name of the discovery ruleset.</p></li>
<li><p><strong>discovery_ruleset_type</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">RuleSetType</span></code>) – The ruleset type is either <code class="xref py py-class docutils literal notranslate"><span class="pre">RuleSetType.ALL</span></code> or
<code class="xref py py-class docutils literal notranslate"><span class="pre">RuleSetType.MERGED</span></code>.
It describes whether this plugins needs the merged result of the effective rules,
or every individual rule matching for the current host.</p></li>
<li><p><strong>check_function</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[…, <code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">IgnoreResults</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Metric</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code>]]]) – The check_function. Arguments must be ‘item’ (if the service has an
item), ‘params’ (if check default parameters are defined) and
‘section’ (if the plugin subscribes to a single section), or
‘section_&lt;name1&gt;, section_&lt;name2&gt;’ ect. corresponding to the
<cite>sections</cite>.</p></li>
<li><p><strong>check_default_parameters</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>]]) – Default parameters for the check function.
Must match the ValueSpec of the corresponding WATO ruleset, if it
exists.</p></li>
<li><p><strong>check_ruleset_name</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – The name of the check ruleset.</p></li>
<li><p><strong>cluster_check_function</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>]) – The cluster check function. If this function is not specified, the
corresponding services will not be available for clusters.
The arguments are the same as the ones for the check function,
except that the sections are dicts (node name -&gt; node section).</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cmk.base.plugins.agent_based.agent_based_api.v1.register.inventory_plugin">
<code class="sig-name descname"><span class="pre">inventory_plugin</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sections</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inventory_function</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inventory_default_parameters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inventory_ruleset_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cmk.base.plugins.agent_based.agent_based_api.v1.register.inventory_plugin" title="Permalink to this definition">¶</a></dt>
<dd><p>Register an inventory plugin to checkmk.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The unique name of the check plugin. It must only contain the
characters ‘A-Z’, ‘a-z’, ‘0-9’ and the underscore.</p></li>
<li><p><strong>sections</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – An optional list of section names that this plugin subscribes to.
They correspond to the ‘parsed_section_name’ specified in
<a class="reference internal" href="#cmk.base.plugins.agent_based.agent_based_api.v1.register.agent_section" title="cmk.base.plugins.agent_based.agent_based_api.v1.register.agent_section"><code class="xref py py-meth docutils literal notranslate"><span class="pre">agent_section()</span></code></a> and <a class="reference internal" href="#cmk.base.plugins.agent_based.agent_based_api.v1.register.snmp_section" title="cmk.base.plugins.agent_based.agent_based_api.v1.register.snmp_section"><code class="xref py py-meth docutils literal notranslate"><span class="pre">snmp_section()</span></code></a>.
The corresponding sections are passed to the discovery and check
function. The functions arguments must be called ‘section_&lt;name1&gt;,
section_&lt;name2&gt;’ ect. Defaults to a list containing as only element
a name equal to the name of the inventory plugin.</p></li>
<li><p><strong>inventory_function</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[…, <code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Attributes</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">TableRow</span></code>]]]) – The inventory_function. Arguments must be ‘params’ (if inventory
parameters are defined) and ‘section’ (if the plugin subscribes
to a single section), or ‘section_&lt;name1&gt;, section_&lt;name2&gt;’ ect.
corresponding to the <cite>sections</cite>.
It is expected to be a generator of <code class="xref py py-class docutils literal notranslate"><span class="pre">Attributes</span></code> or
<code class="xref py py-class docutils literal notranslate"><span class="pre">TableRow</span></code> instances.</p></li>
<li><p><strong>inventory_default_parameters</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>]]) – Default parameters for the inventory function. Must match the
ValueSpec of the corresponding WATO ruleset, if it exists.</p></li>
<li><p><strong>inventory_ruleset_name</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – The name of the inventory ruleset.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="cmk.base.plugins.agent_based.agent_based_api.v1.register.snmp_section">
<code class="sig-name descname"><span class="pre">snmp_section</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">*</span></em>, <em class="sig-param"><span class="pre">name</span></em>, <em class="sig-param"><span class="pre">detect</span></em>, <em class="sig-param"><span class="pre">fetch</span></em>, <em class="sig-param"><span class="pre">parse_function=None</span></em>, <em class="sig-param"><span class="pre">parsed_section_name=None</span></em>, <em class="sig-param"><span class="pre">host_label_function=None</span></em>, <em class="sig-param"><span class="pre">host_label_default_parameters=None</span></em>, <em class="sig-param"><span class="pre">host_label_ruleset_name=None</span></em>, <em class="sig-param"><span class="pre">host_label_ruleset_type=&lt;RuleSetType.MERGED:</span> <span class="pre">1&gt;</span></em>, <em class="sig-param"><span class="pre">supersedes=None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#cmk.base.plugins.agent_based.agent_based_api.v1.register.snmp_section" title="Permalink to this definition">¶</a></dt>
<dd><p>Register an snmp section to checkmk</p>
<p>The snmp information will be gathered and parsed according to the functions and
options given to this function:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The unique name of the section to be registered.</p></li>
<li><p><strong>detect</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">SNMPDetectSpecification</span></code>) – The conditions on single OIDs that will result in the attempt to
fetch snmp data and discover services.
This should only match devices to which the section is applicable.
It is higly recomended to check the system description OID at the very
first, as this will make the discovery much more responsive and consume
less resources.</p></li>
<li><p><strong>fetch</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">SNMPTree</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">SNMPTree</span></code>]]) – The specification of snmp data that should be fetched from the device.
It must be an <code class="xref py py-class docutils literal notranslate"><span class="pre">SNMPTree</span></code> object, or a non-empty list of them.
The parse function will be passed a single <code class="xref py py-class docutils literal notranslate"><span class="pre">StringTable</span></code> or a
list of them accordingly.</p></li>
<li><p><strong>parse_function</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]], <code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]]]]], <code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]]], <code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]]]]]], <code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – The function responsible for parsing the raw snmp data.
It must accept exactly one argument by the name ‘string_table’.
It will be passed either a single <code class="xref py py-class docutils literal notranslate"><span class="pre">StringTable</span></code>, or a list
of them, depending on the value type of the <cite>fetch</cite> argument.
It may return an arbitrary object. Note that if the return value is
<cite>None</cite>, no forther processing will take place (just as if the agent had
not sent any data).
This function may raise arbitrary exceptions, which will be dealt with
by the checking engine. You should expect well formatted data.</p></li>
<li><p><strong>parsed_section_name</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – The name under which the parsed section will be available to the plugins.
Defaults to the original name.</p></li>
<li><p><strong>host_label_function</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[…, <code class="xref py py-class docutils literal notranslate"><span class="pre">Generator</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">HostLabel</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]]]) – The function responsible for extracting host labels from the parsed data.
It must accept exactly one argument by the name ‘section’.
When the function is called, it will be passed the parsed data as
returned by the parse function.
It is expected to yield objects of type <code class="xref py py-class docutils literal notranslate"><span class="pre">HostLabel</span></code>.</p></li>
<li><p><strong>host_label_default_parameters</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>]]) – Default parameters for the host label function. Must match
the ValueSpec of the corresponding WATO ruleset, if it exists.</p></li>
<li><p><strong>host_label_ruleset_name</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – The name of the host label ruleset.</p></li>
<li><p><strong>host_label_ruleset_type</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">RuleSetType</span></code>) – The ruleset type is either <code class="xref py py-class docutils literal notranslate"><span class="pre">RuleSetType.ALL</span></code> or
<code class="xref py py-class docutils literal notranslate"><span class="pre">RuleSetType.MERGED</span></code>.
It describes whether this plugins needs the merged result of the
effective rules, or every individual rule matching for the current host.</p></li>
<li><p><strong>supersedes</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – A list of section names which are superseded by this sections. If this
section will be parsed to something that is not <cite>None</cite> (see above) all
superseded section will not be considered at all.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="cmk.base.plugins.agent_based.agent_based_api.v1.render.html" class="btn btn-neutral float-right" title="agent_based_api.v1.render" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="cmk.base.plugins.agent_based.agent_based_api.v1.clusterize.html" class="btn btn-neutral float-left" title="agent_based_api.v1.clusterize" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, tribe29 GmbH.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>